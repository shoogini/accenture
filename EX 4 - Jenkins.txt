----Start Jenkins----

# Create lab folder and enter it
New-Item -ItemType Directory -Force -Path "$HOME\jenkins-static-site" | Out-Null
Set-Location "$HOME\jenkins-static-site"

# Create docker-compose.yml
@"
version: '3.8'
services:
  jenkins:
    image: jenkins/jenkins:lts
    container_name: jenkins
    restart: unless-stopped
    ports:
      - "8080:8080"
      - "50000:50000"
    volumes:
      - jenkins_home:/var/jenkins_home
      - /var/run/docker.sock:/var/run/docker.sock

volumes:
  jenkins_home:
    driver: local
"@ | Out-File -Encoding UTF8 docker-compose.yml

# Start Jenkins
docker compose up -d

# Get initial admin password
Write-Host "Initial Admin Password:"
docker exec jenkins cat /var/jenkins_home/secrets/initialAdminPassword


Open this - http://localhost:8080

Jenkins → Manage Jenkins → Plugins → Available → search HTML Publisher → Install


----Create Pipeline----

Jenkins → New Item → Pipeline → name: karunya-site-pipeline → OK


2. Pipeline → Definition = “Pipeline script” → paste this entire script:

3. Pipeline Script

pipeline {
  agent any
  stages {
    stage('Generate site') {
      steps {
        script {
          // Clean & create site structure
          sh 'rm -rf site || true'
          sh 'mkdir -p site/assets'

          // Write index.html
          writeFile file: 'site/index.html', text: """
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Karunya University — Simple Site</title>
  <link rel="stylesheet" href="assets/style.css"/>
</head>
<body>
<header class="site-header">
  <div class="container">
    <h1>Karunya University</h1>
    <p class="tagline">Values — Knowledge — Service</p>
  </div>
</header>
<main class="container">
  <section class="card">
    <h2>About Karunya University</h2>
    <p>Karunya Institute of Technology and Sciences is a leading centre for higher education in India.</p>
  </section>
</main>
<footer class="site-footer container">
  <p>&copy; ${new Date().format('yyyy')} Karunya University — Generated by Jenkins</p>
</footer>
</body>
</html>
"""

          // Write CSS
          writeFile file: 'site/assets/style.css', text: """
body { font-family: Arial, sans-serif; margin:0; }
.container { max-width:800px; margin:0 auto; padding:20px; }
.site-header { background:#0b3d91; color:#fff; padding:20px; }
.tagline { font-size:14px; opacity:0.8; }
.card { background:#fff; border:1px solid #ddd; padding:15px; margin:15px 0; border-radius:6px; }
.site-footer { text-align:center; font-size:12px; color:#555; margin-top:20px; }
"""
        }
      }
    }

    stage('Publish site') {
      steps {
        publishHTML([
          allowMissing: false,
          alwaysLinkToLastBuild: true,
          keepAll: true,
          reportDir: 'site',
          reportFiles: 'index.html',
          reportName: 'Karunya University - Simple Site'
        ])
      }
    }
  }

  post {
    always {
      archiveArtifacts artifacts: 'site/**', fingerprint: true
    }
  }
}


4. Build Now

click - Karunya University - Simple Site
